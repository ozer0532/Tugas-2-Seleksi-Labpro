(this["webpackJsonpsuspect-expander"]=this["webpackJsonpsuspect-expander"]||[]).push([[0],{140:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(32),s=(a(97),a(6)),o=a.n(s),c=a(18),u=a(21),l=a(22),h=a(8),d=a(27),p=a(25),f=a(170),m=a(167),g=a(168),v=a(77),b=a.n(v),y=a(78),k=a.n(y),x="https://avatar.labpro.dev/friends/";function E(e){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.a.resolve(x,t),e.next=3,k.a.get(a,{validateStatus:function(e){return!0}});case 3:return n=e.sent,r=n.data,200===n.status&&(r=w(n.data)),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).payload.friends=a.payload.friends.filter((function(e,t){var n=JSON.stringify(e);return t===a.payload.friends.findIndex((function(e){return n===JSON.stringify(e)}))})),a.payload.friends=a.payload.friends.filter((function(e){return e.id!==a.payload.id})),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("1",[]);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return D.apply(this,arguments)}function D(){return(D=Object(c.a)(o.a.mark((function e(t,a){var n,r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.some((function(e){return e.id===t}))){e.next=2;break}return e.abrupt("return",a);case 2:return e.next=4,E(t);case 4:if(n=e.sent,r=a,200!==n.status){e.next=19;break}a.push({id:t,name:n.payload.name}),i=n.payload.friends,s=0;case 10:if(!(s<i.length)){e.next=17;break}return e.next=13,P(i[s].id,r);case 13:r=e.sent;case 14:s++,e.next=10;break;case 17:e.next=20;break;case 19:404===n.status&&console.log("Missing: "+t);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=a(161),N=a(171),L=a(142),B=a(79),F=a.n(B),M={paper:{display:"flex",padding:"2px 4px",margin:"10px"},field:{flex:1,marginLeft:"10px"},icon:{padding:"10px"}},I=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={value:""},n.inputChange=n.inputChange.bind(Object(h.a)(n)),n.onEnterPressed=n.onEnterPressed.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"inputChange",value:function(e){this.setState({value:e.target.value})}},{key:"onEnterPressed",value:function(e){13===e.keyCode&&this.props.onEnterPressed(this.state.value)}},{key:"render",value:function(){var e=this;return r.a.createElement(L.a,{style:M.paper},r.a.createElement(N.a,{style:M.field,placeholder:"Pencarian - Masukkan nama lengkap atau id",onChange:this.inputChange,onKeyDown:this.onEnterPressed}),r.a.createElement(G.a,{style:M.icon,onClick:function(){return e.props.onSearch(e.state.value)}},r.a.createElement(F.a,null)))}}]),a}(r.a.Component),R=a(165),T=a(162),H=a(163),V=a(164);var W=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:e.headerVariant},e.data.name),r.a.createElement(T.a,{variant:e.infoVariant},"Id: "+e.data.id+" ","Elemen: ",r.a.createElement("i",null,e.data.element)))},z={card:{marginTop:"10px",marginBottom:"10px"},actionArea:{padding:"10px"}};var J=function(e){return r.a.createElement(H.a,{style:z.card},r.a.createElement(V.a,{style:z.actionArea,onClick:function(){return e.onSearch(e.entry.id)}},r.a.createElement(T.a,{variant:"subtitle2",color:"textSecondary"},e.index+1+"."),r.a.createElement(W,{headerVariant:"h6",infoVariant:"body1",data:e.entry})))},A={mainContainer:{margin:"15px"},spaced:{marginTop:"15px"}},Y=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).RenderFriends=n.RenderFriends.bind(Object(h.a)(n)),n.SearchText=n.SearchText.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"RenderFriends",value:function(){var e=this;return"-"===this.props.data.name||this.props.searching||this.props.fail?"":"friends"in this.props.data&&this.props.data.friends.length>0?r.a.createElement(f.a,{style:A.spaced},r.a.createElement(T.a,{variant:"h6"},"Rekan:"),this.props.data.friends.map((function(t,a){return r.a.createElement(J,{onSearch:e.props.onSearch,entry:t,index:a})}))):r.a.createElement(f.a,null,r.a.createElement(T.a,null," Rekan: Tidak ada "))}},{key:"SearchText",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"subtitle1",color:"textSecondary"},"Hasil Pencarian:"),this.props.searching?r.a.createElement(T.a,{variant:"h5"}," Mencari... "):this.props.fail?r.a.createElement(T.a,{variant:"h5"}," Orang tidak ditemukan "):"-"===this.props.data.name?r.a.createElement(T.a,{variant:"h5"}," - "):r.a.createElement(W,{headerVariant:"h5",infoVariant:"body1",data:this.props.data}))}},{key:"render",value:function(){return r.a.createElement(f.a,{style:A.mainContainer},this.SearchText(),r.a.createElement(R.a,{style:A.spaced}),this.RenderFriends())}}]),a}(r.a.Component),K=a(80),$={container:{height:"100%",overflow:"hidden"},graph:{height:"100%",width:"100%"}},q={nodeHighlightBehavior:!0,node:{color:"lightgreen",size:120,highlightStrokeColor:"blue",labelProperty:"name"},link:{highlightColor:"lightblue"},height:800,directed:!0},Q=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).decorateGraphNodesWithInitialPositioning=function(e){return e.map((function(e){return Object.assign({},e,{x:e.x||window.innerHeight/2-Math.floor(100*Math.random()),y:e.y||window.innerHeight/2-Math.floor(100*Math.random())})}))},n.state={config:q},n.onClickNode=n.onClickNode.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.sizeBox.clientHeight,t=this.sizeBox.clientWidth;q.height=e,q.width=t,this.setState({})}},{key:"onClickNode",value:function(e){"function"===typeof this.props.onClick&&(console.log("yes"),this.props.onClick(e))}},{key:"render",value:function(){var e=this;return r.a.createElement(f.a,{ref:function(t){e.sizeBox=t},style:$.container},r.a.createElement(K.Graph,{style:$.graph,ref:function(t){e.graph=t},id:"graph",data:{nodes:this.decorateGraphNodesWithInitialPositioning(this.props.data.nodes),links:this.props.data.links},config:this.state.config,onClickNode:this.onClickNode}))}}]),a}(r.a.Component),U={root:{display:"flex",flexDirection:"column",background:"white",height:"100vh"},searchContainer:{background:"#2196f3"},mainContainer:{flex:"0 1 100%",overflowY:"auto"},dataContainer:{background:"#fafafa",overflowY:"auto",maxHeight:"100%"},graphContainer:{background:"#fff",height:"100%"},displayerContainer:{}};function X(e){return"water"===e?"#4285F4":"earth"===e?"#0F9D58":"fire"===e?"#DB4437":"air"===e?"#F4B400":"#d3d3d3"}var Z=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={personList:[],currentPerson:{id:"0",name:"-",friends:[]},searching:!1,fail:!1,graphData:{nodes:[{id:"0",name:"-",x:-100,y:-100}],links:[]}},n.GetPersonList=n.GetPersonList.bind(Object(h.a)(n)),n.onSearch=n.onSearch.bind(Object(h.a)(n)),n.updateGraphData=n.updateGraphData.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"GetPersonList",value:function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,this.state.personList=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSearch",value:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.searching){e.next=2;break}return e.abrupt("return");case 2:if(this.setState({searching:!0}),t=t.trim(),a=parseInt(t),isNaN(a)){e.next=13;break}return e.next=8,E(t);case 8:if(200!==(n=e.sent).status){e.next=13;break}return this.setState({searching:!1,currentPerson:n.payload,fail:!1}),this.updateGraphData(),e.abrupt("return");case 13:0===this.state.personList.length&&this.GetPersonList(),r=setInterval(Object(c.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.state.personList.length>0)){e.next=12;break}if(clearInterval(r),!((a=i.state.personList.filter((function(e){return e.name===t}))).length>0)){e.next=11;break}return e.next=6,E(a[0].id);case 6:n=e.sent,i.setState({searching:!1,currentPerson:n.payload,fail:!1}),i.updateGraphData(),e.next=12;break;case 11:i.setState({searching:!1,fail:!0});case 12:case"end":return e.stop()}}),e)}))),100);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGraphData",value:function(){var e=this,t=this.state.graphData,a="#d3d3d3";void 0===t.nodes.find((function(t){return t.id===e.state.currentPerson.id}))&&(a=X(this.state.currentPerson.element),t.nodes.push({id:this.state.currentPerson.id,name:this.state.currentPerson.name,color:a})),this.state.currentPerson.friends.forEach((function(n,r){void 0===t.nodes.find((function(e){return e.id===n.id}))&&(a=X(n.element),t.nodes.push({id:n.id,name:n.name,color:a}));var i={source:e.state.currentPerson.id,target:n.id};void 0===t.links.find((function(e){return e.source===i.source&&e.target===i.target}))&&t.links.push(i)})),this.setState({graphData:t}),console.log(this.state)}},{key:"render",value:function(){return r.a.createElement(f.a,{style:U.root},r.a.createElement(f.a,{style:U.searchContainer},r.a.createElement(m.a,null,r.a.createElement(I,{onSearch:this.onSearch,onEnterPressed:this.onSearch}))),r.a.createElement(g.a,{container:!0,spacing:0,style:U.mainContainer},r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:3,style:U.dataContainer},r.a.createElement(Y,{data:this.state.currentPerson,searching:this.state.searching,fail:this.state.fail,onSearch:this.onSearch})),r.a.createElement(g.a,{item:!0,xs:12,md:8,lg:9,style:U.graphContainer},r.a.createElement(Q,{data:this.state.graphData,onClick:this.onSearch}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(i.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500"}),r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,a){e.exports=a(140)},97:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.9edd1891.chunk.js.map